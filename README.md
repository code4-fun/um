# Описание

После сборки прокета, в командной строке нужно перейти в директорию с полученным jar-файлом и выполнить команду следующего формата:
```sh
java -jar um-0.0.1-SNAPSHOT.jar file1.csv file2.json file3.xlsx
```
В качестве параметров указываются файлы, **которые должны находиться в одной директории с jar-файлом**. 

Количество файлов не ограничено.

Приложение может работать с файлами `.CSV`, `.XLSX` и `.JSON`. Формат файлов должен отвечать приведенному в задании.

Если в строках файлов нет ошибок, то вывод строк происходит в формате, указанном в задании:
```sh
{"id":1, "amount":100, "comment":"оплата заказа", "filename":"file1.csv", "line":1, "result":"OK" }
{"id":2, "amount":123, "comment":"оплата заказа", "filename":"file1.csv", "line":2, "result":"OK" }
{"id":2, "amount":1.23, "comment":"оплата заказа", "filename":"file2.json", "line":1, "result":"OK" }
{"id":3, "amount":1.24, "comment":"оплата заказа", "filename":"file2.json", "line":2, "result":"OK" }
{"id":4, "amount":250.52, "comment":"оплата заказа", "filename":"file3.xlsx", "line":1, "result":"OK" }
{"id":5, "amount":300, "comment":"оплата заказа", "filename":"file3.xlsx", "line":2, "result":"OK" }
```
Строки в которых *orderId* и/или *amount* указаны НЕ в числовом формате (*int* и *double* соответственно), например, так:
```sh
xx,yy,USD,оплата заказа
```
выводятся на консоль в таком формате:
```sh
{"id":xx, "amount":yy, "comment":"оплата заказа", "filename":"file1.csv", "line":1, "result":"Order id has wrong format, Amount has wrong format" }
```
То есть, некорректные значения *orderId* и *amount* все же выводятся, но в *result* указывается, что формат неверный.

Строки с недостающими или лишними значениями, например, такие:
```sh
{"amount":1.23,"currency":"USD","comment":"оплата заказа"}
```
выводятся на консоль в таком формате:
```sh
{"id":--, "amount":--, "comment":"--", "filename":"file2.json", "line":1, "result":"Missing values in line" }
```
То есть, значения из такой строки не выводятся, но, указывается имя файла и номер некорректной строки в файле, а также причина ошибки.

Если неверно указано имя файла в команде запуска приложения, например так:
```sh
java -jar um-0.0.1-SNAPSHOT.jar file1.csv file2.js
```
то на консоль выводится сообщение об этом, а остальные файлы читаются и выводятся на консоль в обычном режиме:
```sh
file2.js is wrong file name
{"id":1, "amount":100, "comment":"оплата заказа", "filename":"file1.csv", "line":1, "result":"OK" }
{"id":2, "amount":123, "comment":"оплата заказа", "filename":"file1.csv", "line":2, "result":"OK" }
```
Если в директории отсутствует один или несколько файлов, указанных в параметрах запуска приложения, то сообщение об ошибке с соответствующим stacktrace-ом будет помещено в файл `logging.txt`, но на консоль никаких сообщений выведено не будет. Остальные файлы будут обработаны в обычном режиме.


Обработка файлов запускается в отдельных потоках. Это реализовано в методе `run()` класса `UmApplication`.

Класс `LoggingAspect` выполняет логирование.

Файл `logging.txt` создается в одной директории с jar-файлом. Логируется дата и время выполнения методов и некоторая другая информация в формате:
```sh
2021.03.10 18.45.09.704  УСПЕШНО ВЫПОЛНЕН МЕТОД - fileExtension(), КЛАССА - FileService, С РЕЗУЛЬТАТОМ ВЫПОЛНЕНИЯ - csv
```
Ошибки логируются в следующем формате:
```sh
2021.03.10 18.45.09.738  МЕТОД - processCSV(), КЛАССА - FileService, БЫЛ АВАРИЙНО ЗАВЕРШЕН С ОШИБКОЙ - java.io.FileNotFoundException
Stacktrace:
 java.io.FileNotFoundException<br>
	at com.um.service.FileService.processCSV(FileService.java:37)<br>
	at com.um.service.FileService$$FastClassBySpringCGLIB$$f1178277.invoke(<generated>)<br>
    ...
```
Таким образом, если какой-то метод выбрасывает исключение, **stacktrace выводится в log-файл, а не на консоль, как и требуется в задании**.
Кроме того, в файле `application.properties` отключены сообщения при старте приложения.